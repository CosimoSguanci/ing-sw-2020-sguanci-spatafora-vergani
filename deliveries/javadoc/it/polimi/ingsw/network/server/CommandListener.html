<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="it">
<head>
<!-- Generated by javadoc (13.0.2) on Mon Jun 29 21:57:15 CEST 2020 -->
<title>CommandListener</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-06-29">
<meta name="description" content="declaration: package: it.polimi.ingsw.network.server, class: CommandListener">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">it.polimi.ingsw.network.server</a></div>
<h1 title="Class CommandListener" class="title">Class CommandListener</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance"><a href="../../observer/Observable.html" title="class in it.polimi.ingsw.observer">it.polimi.ingsw.observer.Observable</a>&lt;<a href="../../controller/commands/Command.html" title="class in it.polimi.ingsw.controller.commands">Command</a>&gt;
<div class="inheritance">it.polimi.ingsw.network.server.CommandListener</div>
</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../ObjectListener.html" title="interface in it.polimi.ingsw.network">ObjectListener</a></code>, <code>java.lang.Runnable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">CommandListener</span>
extends <a href="../../observer/Observable.html" title="class in it.polimi.ingsw.observer">Observable</a>&lt;<a href="../../controller/commands/Command.html" title="class in it.polimi.ingsw.controller.commands">Command</a>&gt;
implements <a href="../ObjectListener.html" title="interface in it.polimi.ingsw.network">ObjectListener</a>, java.lang.Runnable</pre>
<div class="block">This class implements the capability of listen asynchronously the client-server stream to catch <a href="../../controller/commands/Command.html" title="class in it.polimi.ingsw.controller.commands"><code>Command</code></a> objects sent from client to server.
 Composition-over-inheritance principle is applied to let this class extend Observable (the <a href="ClientHandler.html" title="class in it.polimi.ingsw.network.server"><code>ClientHandler</code></a> must
 observe an instance of this class in order to catch commands and to notify the <a href="../../controller/Controller.html" title="class in it.polimi.ingsw.controller"><code>Controller</code></a> about new commands sent from client to server),
 but also share code with <a href="../client/UpdateListener.html" title="class in it.polimi.ingsw.network.client"><code>UpdateListener</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../ObjectListenerDelegate.html" title="class in it.polimi.ingsw.network"><code>ObjectListenerDelegate</code></a></dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.net.Socket,it.polimi.ingsw.network.server.Server)">CommandListener</a></span>&#8203;(java.net.Socket&nbsp;socket,
<a href="Server.html" title="class in it.polimi.ingsw.network.server">Server</a>&nbsp;server)</code></th>
<td class="colLast">
<div class="block">CommandListener constructor: a new instance of <a href="../ObjectListenerDelegate.html" title="class in it.polimi.ingsw.network"><code>ObjectListenerDelegate</code></a> is created in order
 to actually listen to the stream.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forwardNotify(java.lang.Object)">forwardNotify</a></span>&#8203;(java.lang.Object&nbsp;command)</code></th>
<td class="colLast">
<div class="block">Forwards <a href="../../controller/commands/Command.html" title="class in it.polimi.ingsw.controller.commands"><code>Command</code></a> objects to the <a href="ClientHandler.html" title="class in it.polimi.ingsw.network.server"><code>ClientHandler</code></a> instance if a command is received.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#handleConnectionReset()">handleConnectionReset</a></span>()</code></th>
<td class="colLast">
<div class="block">Callback called when a client disconnects (read exception or socket.close done from handleConnectionTimeoutExpired).</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#handleConnectionTimeoutExpired()">handleConnectionTimeoutExpired</a></span>()</code></th>
<td class="colLast">
<div class="block">Callback called when the listen timeout expires for a client.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isActive()">isActive</a></span>()</code></th>
<td class="colLast">
<div class="block">This method is useful to check if the communication between client and server is still in progress.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run()">run</a></span>()</code></th>
<td class="colLast">
<div class="block">Classic overridden version of run method (from <code>Runnable</code> interface).</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setIsActive(boolean)">setIsActive</a></span>&#8203;(boolean&nbsp;active)</code></th>
<td class="colLast">
<div class="block">Active flag setter</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;it.polimi.ingsw.observer.<a href="../../observer/Observable.html" title="class in it.polimi.ingsw.observer">Observable</a></h3>
<a id="methods.inherited.from.class.it.polimi.ingsw.observer.Observable">
<!--   -->
</a><code><a href="../../observer/Observable.html#addObserver(it.polimi.ingsw.observer.Observer)">addObserver</a>, <a href="../../observer/Observable.html#notify(T)">notify</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(java.net.Socket,it.polimi.ingsw.network.server.Server)">CommandListener</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">CommandListener</span>&#8203;(<span class="arguments">java.net.Socket&nbsp;socket,
<a href="Server.html" title="class in it.polimi.ingsw.network.server">Server</a>&nbsp;server)</span></div>
<div class="block">CommandListener constructor: a new instance of <a href="../ObjectListenerDelegate.html" title="class in it.polimi.ingsw.network"><code>ObjectListenerDelegate</code></a> is created in order
 to actually listen to the stream.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>socket</code> - the channel between client and server.</dd>
<dd><code>server</code> - server instance, needed to handle clients disconnections.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="isActive()">isActive</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isActive</span>()</div>
<div class="block">This method is useful to check if the communication between client and server is still in progress.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../ObjectListener.html#isActive()">isActive</a></code>&nbsp;in interface&nbsp;<code><a href="../ObjectListener.html" title="interface in it.polimi.ingsw.network">ObjectListener</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the socket is still open, false otherwise.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setIsActive(boolean)">setIsActive</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setIsActive</span>&#8203;(<span class="arguments">boolean&nbsp;active)</span></div>
<div class="block">Active flag setter</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../ObjectListener.html#setIsActive(boolean)">setIsActive</a></code>&nbsp;in interface&nbsp;<code><a href="../ObjectListener.html" title="interface in it.polimi.ingsw.network">ObjectListener</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>active</code> - the new value of the active flag</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="run()">run</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">run</span>()</div>
<div class="block">Classic overridden version of run method (from <code>Runnable</code> interface). Note that
 the channel is listen on a separate thread (the new Thread is every time a new client connects
 to the server).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="forwardNotify(java.lang.Object)">forwardNotify</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">forwardNotify</span>&#8203;(<span class="arguments">java.lang.Object&nbsp;command)</span></div>
<div class="block">Forwards <a href="../../controller/commands/Command.html" title="class in it.polimi.ingsw.controller.commands"><code>Command</code></a> objects to the <a href="ClientHandler.html" title="class in it.polimi.ingsw.network.server"><code>ClientHandler</code></a> instance if a command is received.
 Otherwise, it checks if the object received is a ping message (health checks sent from clients), and remove
 the client from the list of client which haven't sent a ping message in the last timeout period yet.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../ObjectListener.html#forwardNotify(java.lang.Object)">forwardNotify</a></code>&nbsp;in interface&nbsp;<code><a href="../ObjectListener.html" title="interface in it.polimi.ingsw.network">ObjectListener</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>command</code> - the object received</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Server.html#removeFromPingWaitingList(java.net.Socket)"><code>Server.removeFromPingWaitingList(Socket)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="handleConnectionTimeoutExpired()">handleConnectionTimeoutExpired</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">handleConnectionTimeoutExpired</span>()
                                    throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Callback called when the listen timeout expires for a client. If the server was waiting for a ping message (and it hasn't received one),
 the socket is closed and the Player is "marked" as disconnected, otherwise it is added to the waiting list to check if it's still alive.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../ObjectListener.html#handleConnectionTimeoutExpired()">handleConnectionTimeoutExpired</a></code>&nbsp;in interface&nbsp;<code><a href="../ObjectListener.html" title="interface in it.polimi.ingsw.network">ObjectListener</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if socket.close() encounters some unexpected error.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Server.html#addToPingWaitingList(java.net.Socket)"><code>Server.addToPingWaitingList(Socket)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="handleConnectionReset()">handleConnectionReset</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">handleConnectionReset</span>()</div>
<div class="block">Callback called when a client disconnects (read exception or socket.close done from handleConnectionTimeoutExpired).
 It delegates connection reset handling to <a href="Server.html" title="class in it.polimi.ingsw.network.server"><code>Server</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../ObjectListener.html#handleConnectionReset()">handleConnectionReset</a></code>&nbsp;in interface&nbsp;<code><a href="../ObjectListener.html" title="interface in it.polimi.ingsw.network">ObjectListener</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>Server.handleConnectionReset(Socket)</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
